function getMyProfile(){var e=Parse.User.current(),o=(e.getUsername(),e.id),r=function(){var e=Parse.User.current(),o=e.get("name"),r=e.get("gender"),t=e.get("birthdate"),i=e.get("motto"),a=e.get("major"),n=e.get("school"),d=e.get("interest"),s=e.get("location");$("#body-input-edit-profile-name").val(o);var l=$("#body-select-edit-profile-gender");l.val(r?"on":"off"),r?l.parent().addClass("ui-flipswitch-active"):l.parent().removeClass("ui-flipswitch-active"),$("#body-input-edit-profile-birthdate").val(t),$("#body-input-edit-profile-motto").val(i),$("#body-input-edit-profile-major").val(a),$("#body-input-edit-profile-school").val(n),$("#body-input-edit-profile-interest").val(d),$("#body-input-edit-profile-location").val(s)};ParseUpdateCurrentUser(r,function(){}),r=function(e,o){var r=e.get("profilePhoto120");"undefined"==typeof r&&(r="./content/png/Taylor-Swift.png");var t=document.getElementById("body-profile-photo-preview-canvas"),i=t.getContext("2d"),a=new Image;a.onload=function(){i.drawImage(a,0,0)},a.src=r},CacheGetProfilePhotoByUserId(o,r,{}),profilePreview=loadedImage("#body-input-edit-profile-photo")}function saveProfile(){$("#body-bottom-profile-save-btn").unbind("click");var e=Parse.User.current(),o=(e.getUsername(),e.id),r=$("#body-input-edit-profile-photo")[0];if(r.files.length>0)var t=document.getElementById("body-profile-photo-preview-canvas"),i=t.toDataURL(),a=r.files[0];else i=null,a=null;var n=$("#body-input-edit-profile-name").val(),d="on"==$("#body-select-edit-profile-gender").val(),s=$("#body-input-edit-profile-birthdate").val(),l=$("#body-input-edit-profile-motto").val(),p=$("#body-input-edit-profile-major").val(),f=$("#body-input-edit-profile-school").val(),b=$("#body-input-edit-profile-interest").val(),c=$("#body-input-edit-profile-location").val(),w=function(){ParseUpdateCurrentUser(function(){},function(){})};ParseSaveProfile(n,d,s,l,p,f,b,c,w),ParseSaveProfilePhoto(o,a,i,function(e){})}function changePassword(e,o,r){if($.mobile.loading("show"),0==e.localeCompare("old")){var t=function(){$("#body-form-confirm-password").hide(),$("#body-form-set-new-password").show(),$("#body-confirm-password-btn").hide(),$("#body-set-new-password-btn").show(),$("#body-input-old-password").val(""),$("#body-input-set-new-password").val(""),$("#body-input-confirm-new-password").val(""),$("#body-confirm-password-error").html(""),$("#body-set-new-password-error").html(""),$("#body-input-set-new-password").focus(),$.mobile.loading("hide")},i=function(e){var o="";o=101==e.code?"Password does not match your account.":"Failed to connect server, please try again.",$("#body-input-old-password").val(""),$("#body-confirm-password-error").html(o),$.mobile.loading("hide")};ParseConfirmPassword(o,t,i)}if(0==e.localeCompare("new")){if(0!=o.localeCompare(r)){var a="Password does not match. Please reenter password.";return $("#body-set-new-password-error").html(a),void $.mobile.loading("hide")}if(o.length<6)return a="Password should be at least 6 characters. Please reenter password.",$("#body-set-new-password-error").html(a),void $.mobile.loading("hide");t=function(){$("#body-form-confirm-password").show(),$("#body-form-set-new-password").hide(),$("#body-confirm-password-btn").show(),$("#body-set-new-password-btn").hide(),$("#body-input-old-password").val(""),$("#body-input-set-new-password").val(""),$("#body-input-set-new-password-confirm").val(""),$("#body-confirm-password-error").html(""),$("#body-set-new-password-error").html(""),setCurrLocationHash("#page-setting"),$.mobile.changePage("#page-setting"),$.mobile.loading("hide")},i=function(){var e="Failed to save password, please try again.";$("#body-set-new-password-error").html(e),$.mobile.loading("hide")},ParseChangePassword(o,t,i)}}var profilePreview;